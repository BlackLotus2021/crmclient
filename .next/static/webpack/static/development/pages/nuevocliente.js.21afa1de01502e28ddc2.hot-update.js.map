{"version":3,"file":"static/webpack/static\\development\\pages\\nuevocliente.js.21afa1de01502e28ddc2.hot-update.js","sources":["webpack:///./pages/nuevocliente.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Layout from '../components/Layout';\nimport { useFormik } from 'formik'\nimport * as Yup from 'yup'\nimport { gql, useMutation } from '@apollo/client';\nimport { useRouter } from 'next/router'\n\nconst NUEVO_CLIENTE = gql`\n    mutation nuevoCliente($input: ClienteInput) {\n        nuevoCliente(input: $input) {\n            id\n            nombre\n            apellido\n            direccion\n            ciudad\n            pais\n            empresa\n            email\n            telefono\n        }\n    }\n`;\n\nconst OBTENER_CLIENTES_USUARIO = gql`\n    query obtenerClientesVendedor {\n        obtenerClientesVendedor {\n            id\n            nombre\n            apellido\n            direccion\n            ciudad\n            pais\n            empresa\n            email\n            telefono\n        }\n    }\n\n`;\n\nconst NuevoCliente = () => {\n\n    const router = useRouter();\n\n    // Mensaje de alerta\n    const [mensaje, guardarMensaje] = useState(null);\n\n\n    // Mutation para crear nuevos clientes\n    const [nuevoCliente] = useMutation(NUEVO_CLIENTE, {\n        update(cache, { data: { nuevoCliente } }) {\n            // Obtener el objeto de cache que deseamos actualizar\n            const { obtenerClientesVendedor } = cache.readQuery({ query: OBTENER_CLIENTES_USUARIO });\n\n            // Reescribimos el cache ( el cache nunca se debe modificar )\n            cache.writeQuery({\n                query: OBTENER_CLIENTES_USUARIO,\n                data: {\n                    obtenerClientesVendedor: [...obtenerClientesVendedor, nuevoCliente]\n                }\n            })\n        }\n    })\n\n\n    const formik = useFormik({\n        initialValues: {\n            nombre: '',\n            apellido: '',\n            direccion: '',\n            ciudad: '',\n            pais: '',\n            empresa: '',\n            email: '',\n            telefono: '',\n        },\n        validationSchema: Yup.object({\n            nombre: Yup.string()\n                .required('El nombre del cliente es obligatorio'),\n            apellido: Yup.string()\n                .required('El apellido del cliente es obligatorio'),\n            empresa: Yup.string()\n                .required('El campo empresa  es obligatorio'),\n            email: Yup.string()\n                .email('Email no v치lido')\n                .required('El email del cliente es obligatorio'),\n            direccion: Yup.string()\n                .required('La direcci칩n del cliente es obligatorio'),\n            ciudad: Yup.string()\n                .required('La ciudad del cliente es obligatorio'),\n            pais: Yup.string()\n                .required('El pais del cliente es obligatorio'),\n            telefono: Yup.string()\n            .matches(/(01)(\\d){8}\\b/, 'Enter a valid phone number')\n            .required('Phone number is required'),\n        }),\n        onSubmit: async valores => {\n\n            const { nombre, apellido, direccion, ciudad, pais, empresa, email, telefono } = valores\n\n            try {\n                const { data } = await nuevoCliente({\n                    variables: {\n                        input: {\n                            nombre,\n                            apellido,\n                            direccion,\n                            ciudad,\n                            pais,\n                            empresa,\n                            email,\n                            telefono,\n                        }\n                    }\n                });\n                // console.log(data.nuevoCliente);\n                router.push('/'); // redireccionar hacia clientes\n            } catch (error) {\n                guardarMensaje(error.message.replace('GraphQL error: ', ''));\n\n                setTimeout(() => {\n                    guardarMensaje(null);\n                }, 2000);\n            }\n        }\n    })\n\n    const mostrarMensaje = () => {\n        return (\n            <div className=\"bg-white py-2 px-3 w-full my-3 max-w-sm text-center mx-auto\">\n                <p>{mensaje}</p>\n            </div>\n        )\n    }\n\n    return (\n        <Layout>\n            <h1 className=\"text-2xl text-gray-800 font-light\">Nuevo Cliente</h1>\n\n            {mensaje && mostrarMensaje()}\n\n            <div className=\"flex justify-center mt-5\">\n                <div className=\"w-full max-w-lg\">\n                    <form\n                        className=\"bg-white shadow-md px-8 pt-6 pb-8 mb-4\"\n                        onSubmit={formik.handleSubmit}\n                    >\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"nombre\">\n                                Nombre\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"nombre\"\n                                type=\"text\"\n                                placeholder=\"Nombre Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.nombre}\n                            />\n                        </div>\n\n                        {formik.touched.nombre && formik.errors.nombre ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.nombre}</p>\n                            </div>\n                        ) : null}\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"apellido\">\n                                Apellido\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"apellido\"\n                                type=\"text\"\n                                placeholder=\"Apellido Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.apellido}\n                            />\n                        </div>\n\n                        {formik.touched.apellido && formik.errors.apellido ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.apellido}</p>\n                            </div>\n                        ) : null}\n\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"direccion\">\n                                Direcci칩n\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"direccion\"\n                                type=\"text\"\n                                placeholder=\"Direcci칩n Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.direccion}\n                            />\n                        </div>\n\n                        {formik.touched.direccion && formik.errors.direccion ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.direccion}</p>\n                            </div>\n                        ) : null}\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"ciudad\">\n                                Ciudad\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"ciudad\"\n                                type=\"text\"\n                                placeholder=\"Ciudad Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.ciudad}\n                            />\n                        </div>\n\n                        {formik.touched.ciudad && formik.errors.ciudad ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.ciudad}</p>\n                            </div>\n                        ) : null}\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"pais\">\n                                Pais\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"pais\"\n                                type=\"text\"\n                                placeholder=\"Pais del Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.pais}\n                            />\n                        </div>\n\n                        {formik.touched.pais && formik.errors.pais ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.pais}</p>\n                            </div>\n                        ) : null}\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"empresa\">\n                                Empresa\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"empresa\"\n                                type=\"text\"\n                                placeholder=\"Empresa Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.empresa}\n                            />\n                        </div>\n\n                        {formik.touched.empresa && formik.errors.empresa ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.empresa}</p>\n                            </div>\n                        ) : null}\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"email\">\n                                Email\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"email\"\n                                type=\"email\"\n                                placeholder=\"Email Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.email}\n                            />\n                        </div>\n\n                        {formik.touched.email && formik.errors.email ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.email}</p>\n                            </div>\n                        ) : null}\n\n                        <div className=\"mb-4\">\n                            <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"telefono\">\n                                Telefono\n                                </label>\n\n                            <input\n                                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                id=\"telefono\"\n                                type=\"tel\"\n                                placeholder=\"Telfono Cliente\"\n                                onChange={formik.handleChange}\n                                onBlur={formik.handleBlur}\n                                value={formik.values.telefono}\n                            />\n                        </div>\n                        {formik.touched.telefono && formik.errors.telefono ? (\n                            <div className=\"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" >\n                                <p className=\"font-bold\">Error</p>\n                                <p>{formik.errors.telefono}</p>\n                            </div>\n                        ) : null}\n\n                        <input\n                            type=\"submit\"\n                            className=\"bg-gray-800 w-full mt-5 p-2 text-white uppercase font-bold hover:bg-gray-900\"\n                            value=\"Registrar Cliente\"\n                        />\n                    </form>\n                </div>\n            </div>\n        </Layout>\n\n    );\n}\n\nexport default NuevoCliente;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAgBA;AACA;AAgBA;AAEA;AACA;AAHA;AAAA;AAAA;AACA;AACA;AAFA;AAUA;AAAA;AACA;AAAA;AADA;AAEA;AAAA;AAFA;AACA;AACA;AAGA;AACA;AACA;AACA;AADA;AAFA;AAMA;AAZA;AATA;AAAA;AACA;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AAEA;AAEA;AAEA;AAGA;AAEA;AAEA;AAEA;AAhBA;AAoBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AAFA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AADA;AADA;AACA;AANA;AAAA;AAKA;AAcA;AACA;AACA;AArBA;AAAA;AACA;AADA;AAAA;AAAA;AAsBA;AAEA;AACA;AACA;AACA;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA/BA;AACA;AA6DA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;;;;A","sourceRoot":""}